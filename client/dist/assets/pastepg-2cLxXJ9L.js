import{aC as D}from"./SnackbarsStore-D4uwPXBo.js";(async()=>{let c=1/0,a=[];for(let e=1;e<=c/100;e++){const t=await fetch(`${D.getApiBaseUrl()}/videos?page=${e}`).then(s=>s.json());if(t.total===0)break;c=t.total,a=[...a,...t.recorded_programs]}a=a.reverse();const m=document.getElementById("channels"),u=document.getElementById("times"),h=document.getElementById("schedule"),r=[...new Set(a.sort((e,t)=>e.channel.remocon_id-t.channel.remocon_id).map(e=>e.channel.name))];r.forEach(e=>{const t=document.createElement("div");t.className="channel-name",t.textContent=e,m.appendChild(t)});const o=new Date(a.reduce((e,t)=>new Date(e.start_time)<new Date(t.start_time)?e:t).start_time),w=new Date(a.reduce((e,t)=>new Date(e.end_time)>new Date(t.end_time)?e:t).end_time),l=[];for(let e=new Date(o.setMinutes(0,0,0));e<=w;e.setHours(e.getHours()+1))l.push(new Date(e));l.forEach(e=>{const t=document.createElement("div");t.className="time-label",e.getHours()===0?t.innerText=`${e.toLocaleString([],{month:"numeric",day:"numeric",weekday:"short",hour:"numeric"})}`:t.textContent=e.toLocaleTimeString([],{hour:"numeric"}),u.appendChild(t)}),a.forEach(e=>{const t=r.findIndex(i=>i===e.channel.name),s=new Date(e.start_time).getMinutes().toString().padStart(2,"0"),g=i=>"genre_"+(()=>{var d;switch((d=i.genres[0])==null?void 0:d.major){case"スポーツ":return"sports";case"ドラマ":return"drama";case"音楽":return"music";case"映画":return"movie";case"アニメ・特撮":return"anime";default:return"none"}})(),n=document.createElement("a");n.className="program",n.classList.add(g(e)),n.style.gridColumn=t+1,n.style.gridRowStart=Math.floor((new Date(e.start_time)-o)/(60*1e3))+1,n.style.gridRowEnd=`span ${Math.ceil(e.duration/60)}`,n.href=`https://yyya-nico.co/konomitv/videos/watch/${e.id}`,n.target="_blank",n.title=e.title,n.innerHTML=`
            <div class="start-time">${s}</div>
            ${e.title}
        `,h.appendChild(n)})})();
