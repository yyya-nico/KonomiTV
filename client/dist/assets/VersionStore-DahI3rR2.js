import{aR as t,bY as n,az as i}from"./SnackbarsStore-DxiM_ro_.js";class o{static async fetchServerVersion(r=!1){const s=await t.get("/version");return s.type==="error"?(r===!1&&t.showGenericError(s,"バージョン情報を取得できませんでした。"),null):s.data}}const v=n("version",{state:()=>({server_version_info:null,last_updated_at:0}),getters:{client_version(){return i.version},server_version(){var e;return((e=this.server_version_info)==null?void 0:e.version)??null},latest_version(){var e;return((e=this.server_version_info)==null?void 0:e.latest_version)??null},is_client_develop_version(){return this.client_version.includes("-dev")},is_server_develop_version(){var e;return((e=this.server_version)==null?void 0:e.includes("-dev"))??!1},is_update_available(){return this.server_version===null||this.latest_version===null?!1:this.is_server_develop_version===!1&&this.server_version!==this.latest_version||this.is_server_develop_version===!0&&this.server_version.replace("-dev","")===this.latest_version},is_version_mismatch(){return this.server_version===null?!1:this.client_version!==this.server_version}},actions:{async fetchServerVersion(e=!1){if(this.server_version_info!==null&&e===!1)return i.time()-this.last_updated_at>60&&this.fetchServerVersion(!0),this.server_version_info;const r=await o.fetchServerVersion();return r===null?null:(this.server_version_info=r,this.last_updated_at=i.time(),this.server_version_info)}}}),_=v;export{o as V,_ as u};
