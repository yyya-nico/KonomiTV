import{u as Z,b as w,e as D,f as ee,g as te,m as le,h as ne}from"./VTextField-BFiqfhVJ.js";import{g as ae,p as ue,q as ie,i as oe,C as B,an as R,f as re,j as se,ao as ce}from"./top-VX3CXCzb.js";import{c as de}from"./VChip-D2CPjMtq.js";import{ai as r,W as p,N as fe,p as n,ab as y,F as h,D as ve}from"./SnackbarsStore-IT_VMLII.js";const me=ue({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...le({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>B(e).every(c=>c!=null&&typeof c=="object")},...te({clearable:!0})},"VFileInput"),ke=ae()({name:"VFileInput",inheritAttrs:!1,props:me(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,c){let{attrs:N,emit:g,slots:a}=c;const{t:C}=ie(),l=oe(e,"modelValue",e.modelValue,t=>B(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:d,focus:M,blur:$}=Z(e),k=r(()=>typeof e.showSize!="boolean"?e.showSize:void 0),I=r(()=>(l.value??[]).reduce((t,o)=>{let{size:s=0}=o;return t+s},0)),b=r(()=>R(I.value,k.value)),f=r(()=>(l.value??[]).map(t=>{const{name:o="",size:s=0}=t;return e.showSize?`${o} (${R(s,k.value)})`:o})),j=r(()=>{const t=l.value?.length??0;return e.showSize?C(e.counterSizeString,t,b.value):C(e.counterString,t)}),V=p(),S=p(),u=p(),x=r(()=>d.value||e.active),F=r(()=>["plain","underlined"].includes(e.variant));function v(){u.value!==document.activeElement&&u.value?.focus(),d.value||M()}function T(t){u.value?.click()}function E(t){g("mousedown:control",t)}function O(t){u.value?.click(),g("click:control",t)}function q(t){t.stopPropagation(),v(),ve(()=>{l.value=[],ce(e["onClick:clear"],t)})}function L(t){t.preventDefault()}function U(t){t.preventDefault(),t.dataTransfer&&(l.value=[...t.dataTransfer.files??[]])}return fe(l,t=>{(!Array.isArray(t)||!t.length)&&u.value&&(u.value.value="")}),re(()=>{const t=!!(a.counter||e.counter),o=!!(t||a.details),[s,W]=se(N),{modelValue:pe,..._}=w.filterProps(e),G=D.filterProps(e);return n(w,y({ref:V,modelValue:e.multiple?l.value:l.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":F.value},e.class],style:e.style,"onClick:prepend":T},s,_,{centerAffix:!F.value,focused:d.value}),{...a,default:m=>{let{id:H,isDisabled:P,isDirty:z,isReadonly:A,isValid:J}=m;return n(D,y({ref:S,"prepend-icon":e.prependIcon,onMousedown:E,onClick:O,"onClick:clear":q,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},G,{id:H.value,active:x.value||z.value,dirty:z.value||e.dirty,disabled:P.value,focused:d.value,error:J.value===!1,onDragover:L,onDrop:U}),{...a,default:K=>{let{props:{class:Q,...X}}=K;return n(h,null,[n("input",y({ref:u,type:"file",readonly:A.value,disabled:P.value,multiple:e.multiple,name:e.name,onClick:i=>{i.stopPropagation(),A.value&&i.preventDefault(),v()},onChange:i=>{if(!i.target)return;const Y=i.target;l.value=[...Y.files??[]]},onFocus:v,onBlur:$},X,W),null),n("div",{class:Q},[!!l.value?.length&&!e.hideInput&&(a.selection?a.selection({fileNames:f.value,totalBytes:I.value,totalBytesReadable:b.value}):e.chips?f.value.map(i=>n(de,{key:i,size:"small",text:i},null)):f.value.join(", "))])])}})},details:o?m=>n(h,null,[a.details?.(m),t&&n(h,null,[n("span",null,null),n(ne,{active:!!l.value?.length,value:j.value,disabled:e.disabled},a.counter)])]):void 0})}),ee({},V,S,u)}});export{ke as V};
