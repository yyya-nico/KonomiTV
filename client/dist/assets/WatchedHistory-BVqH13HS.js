import{u as y,a as v,_ as f}from"./top-DRHtSJqE.js";import{B as w}from"./Breadcrumbs-Cf3MWlVv.js";import{H as B,N as b}from"./Navigation-D6Tek7yB.js";import{R as M}from"./RecordedProgramList-DfY93CcD.js";import{V as S}from"./Videos-D7fTiRjA.js";import{I as V,aE as q,V as r,N as l,M as H,a4 as I,p as i,aw as d,_ as N}from"./SnackbarsStore-Buj_rJWA.js";import"./logo-CHVboZgx.js";import"./ssrBoot-DbQrzm4C.js";import"./VersionStore-fcAF5g0F.js";import"./VDialog-CcrI5zGa.js";import"./VChip-BGriZLEQ.js";import"./VTextField-BeSu5vJ2.js";import"./VAvatar-C1mcRH-e.js";import"./VCard-D2bpv5xd.js";import"./VSelect-BFdzPBel.js";const E={class:"route-container"},R={class:"watched-history-container-wrapper"},k={class:"watched-history-container"},x=V({__name:"WatchedHistory",setup(L){const s=y(),g=v(),m=q(),n=r([]),c=r(0),t=r(!0),a=r(1),p=async()=>{const e=m.settings.watched_history.sort((u,h)=>h.updated_at-u.updated_at).map(u=>u.video_id);if(e.length===0){n.value=[],c.value=0,t.value=!1;return}const o=await S.fetchVideos("ids",a.value,e);o&&(n.value=o.recorded_programs,c.value=o.total),t.value=!1},_=async e=>{a.value=e,t.value=!0,await g.replace({query:{...s.query,page:e.toString()}})};return l(()=>s.query,async e=>{e.page&&(a.value=parseInt(e.page)),await p()},{deep:!0}),l(()=>m.settings.watched_history,async()=>{await p()},{deep:!0}),H(async()=>{s.query.page&&(a.value=parseInt(s.query.page)),await p()}),(e,o)=>(N(),I("div",E,[i(B),d("main",null,[i(b),d("div",R,[d("div",k,[i(w,{crumbs:[{name:"ホーム",path:"/"},{name:"視聴履歴",path:"/watched-history/",disabled:!0}]}),i(M,{title:"視聴履歴",programs:n.value,total:c.value,page:a.value,hideSort:!0,isLoading:t.value,showBackButton:!0,showEmptyMessage:!t.value,emptyIcon:"fluent:history-20-regular",emptyMessage:"まだ視聴履歴がありません。",emptySubMessage:"録画番組を30秒以上みると、<br class='d-sm-none'>視聴履歴に追加されます。",forWatchedHistory:!0,"onUpdate:page":_},null,8,["programs","total","page","isLoading","showEmptyMessage"])])])])]))}}),Y=f(x,[["__scopeId","data-v-c7b375d8"]]);export{Y as default};
