import{u as L,a as z,v as H,b as U,V as C,R as m,_ as E,p as F,af as M,m as G,$ as K,a5 as Q,a4 as X,b4 as Y,d as Z,aT as j,S as J,g as O,b5 as tt,ak as at,a1 as et,a0 as nt,a8 as st,aa as it,h as ot,b6 as rt,X as lt,a2 as ct,e as ut,b7 as vt,M as dt}from"./top-BadExMer.js";import{_ as _t}from"./logo-DFqgSWDU.js";import{V as R,u as ht}from"./ssrBoot-DoAE_Q8b.js";import{x as T,P,d as pt,am as gt,ac as w,Y as S,T as h,$ as I,_ as g,U as f,a2 as d,k as i,at as c,a1 as mt,au as ft,ai as kt,Q as W,R as V,an as $,a8 as p,aI as yt,Z as bt,av as wt}from"./SnackbarsStore-DxiM_ro_.js";import{u as Ct}from"./VersionStore-DPzwN7Gd.js";function St(t,r,a,u){function s(e){return e instanceof a?e:new a(function(o){o(e)})}return new(a||(a=Promise))(function(e,o){function v(_){try{n(u.next(_))}catch(l){o(l)}}function k(_){try{n(u.throw(_))}catch(l){o(l)}}function n(_){_.done?e(_.value):s(_.value).then(v,k)}n((u=u.apply(t,[])).next())})}function $t(t,r){var a={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},u,s,e,o;return o={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function v(n){return function(_){return k([n,_])}}function k(n){if(u)throw new TypeError("Generator is already executing.");for(;o&&(o=0,n[0]&&(a=0)),a;)try{if(u=1,s&&(e=n[0]&2?s.return:n[0]?s.throw||((e=s.return)&&e.call(s),0):s.next)&&!(e=e.call(s,n[1])).done)return e;switch(s=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,s=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(e=a.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){a=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){a.label=n[1];break}if(n[0]===6&&a.label<e[1]){a.label=e[1],e=n;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(n);break}e[2]&&a.ops.pop(),a.trys.pop();continue}n=r.call(t,a)}catch(_){n=[6,_],s=0}finally{u=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}var Bt=function(){function t(){var r=this;this.event=null,this.callbacks=[],this.install=function(){return St(r,void 0,void 0,function(){var a=this;return $t(this,function(u){switch(u.label){case 0:return this.event?(this.event.prompt(),[4,this.event.userChoice.then(function(s){var e=s.outcome;return a.updateEvent(null),e==="accepted"||!0})]):[3,2];case 1:return[2,u.sent()];case 2:throw new Error("Not allowed to prompt.")}})})},!(typeof window>"u")&&(window.addEventListener("beforeinstallprompt",function(a){a.preventDefault(),r.updateEvent(a)}),window.addEventListener("appinstalled",function(){r.updateEvent(null)}))}return t.prototype.getEvent=function(){return this.event},t.prototype.canInstall=function(){return this.event!==null},t.prototype.updateEvent=function(r){var a=this;r!==this.event&&(this.event=r,this.callbacks.forEach(function(u){return u(a.canInstall())}))},t.prototype.addListener=function(r){r(this.canInstall()),this.callbacks.push(r)},t.prototype.removeListener=function(r){this.callbacks=this.callbacks.filter(function(a){return r!==a})},t}(),A=new Bt;const q=t=>(W("data-v-89736472"),t=t(),V(),t),It={class:"header"},xt=q(()=>c("img",{class:"konomitv-logo__image",src:_t,height:"21"},null,-1)),Et={key:0,class:"search-box"},Wt=["placeholder"],Vt=q(()=>c("div",{class:"mr-3 mr-md-6"},null,-1)),Dt=T({__name:"HeaderBar",setup(t){const r=P(!1),a=P(""),u=L(),s=z(),e=()=>{s.path.endsWith("/search")&&s.query.query&&(a.value=decodeURIComponent(s.query.query))};pt(()=>{A.addListener(l=>{r.value=l}),e()}),gt(()=>s.fullPath,e);const o=w(()=>s.path.startsWith("/videos")||s.path.startsWith("/mylist")||s.path.startsWith("/viewing-history")?"録画番組を検索...":"放送予定の番組を検索..."),v=()=>s.path.startsWith("/videos")||s.path.startsWith("/mylist")||s.path.startsWith("/viewing-history")?"/videos/search":"/tv/search",k=l=>{l.key==="Enter"&&!l.isComposing&&n()},n=()=>{if(a.value.trim()){const l=v();u.push(`${l}?query=${encodeURIComponent(a.value.trim())}`)}},_=w(()=>{const l=s.path;return!l.startsWith("/captures")&&!l.startsWith("/settings")&&!l.startsWith("/login")&&!l.startsWith("/register")});return(l,y)=>{const x=S("router-link"),D=S("Icon");return h(),I("header",It,[g((h(),f(x,{class:"konomitv-logo ml-3 ml-md-6",to:"/tv/"},{default:d(()=>[xt]),_:1})),[[m]]),i(R),_.value?(h(),I("div",Et,[g(c("input",{class:"search-input",type:"text",placeholder:o.value,"onUpdate:modelValue":y[0]||(y[0]=N=>a.value=N),onKeydown:k},null,40,Wt),[[H,a.value]]),i(D,{class:"search-input__icon",icon:"fluent:search-20-filled",height:"24px",onClick:n})])):mt("",!0),g(i(C,{variant:"flat",class:"pwa-install-button",onClick:y[1]||(y[1]=N=>kt(A).install())},{default:d(()=>[i(D,{icon:"material-symbols:install-desktop-rounded",height:"20px",class:"mr-1"}),ft(" アプリとしてインストール ")]),_:1},512),[[U,r.value]]),Vt])}}}),la=E(Dt,[["__scopeId","data-v-89736472"]]),Nt=F({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...M(),...G(),...K(),...Q(),...X(),...Y({name:"bottom-navigation"}),...Z({tag:"header"}),...j({selectedClass:"v-btn--selected"}),...J()},"VBottomNavigation"),Pt=O()({name:"VBottomNavigation",props:Nt(),emits:{"update:active":t=>!0,"update:modelValue":t=>!0},setup(t,r){let{slots:a}=r;const{themeClasses:u}=tt(),{borderClasses:s}=at(t),{backgroundColorClasses:e,backgroundColorStyles:o}=et($(t,"bgColor")),{densityClasses:v}=nt(t),{elevationClasses:k}=st(t),{roundedClasses:n}=it(t),{ssrBootStyles:_}=ht(),l=w(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),y=ot(t,"active",t.active),{layoutItemStyles:x}=rt({id:t.name,order:w(()=>parseInt(t.order,10)),position:w(()=>"bottom"),layoutSize:w(()=>y.value?l.value:0),elementSize:l,active:y,absolute:$(t,"absolute")});return lt(t,vt),ct({VBtn:{baseColor:$(t,"baseColor"),color:$(t,"color"),density:$(t,"density"),stacked:w(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),ut(()=>i(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":y.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},u.value,e.value,s.value,v.value,k.value,n.value,t.class],style:[o.value,x.value,{height:dt(l.value)},_.value,t.style]},{default:()=>[a.default&&i("div",{class:"v-bottom-navigation__content"},[a.default()])]})),{}}}),At={},B=t=>(W("data-v-8139492e"),t=t(),V(),t),Rt=B(()=>c("span",{class:"mt-1"},"テレビをみる",-1)),Tt=B(()=>c("span",{class:"mt-1"},"ビデオをみる",-1)),qt=B(()=>c("span",{class:"mt-1"},"録画予約",-1)),Lt=B(()=>c("span",{class:"mt-1"},"キャプチャ",-1)),zt=B(()=>c("span",{class:"mt-1"},"マイページ",-1));function Ht(t,r){const a=S("Icon");return h(),f(Pt,{class:"bottom-navigation-container elevation-12",color:"primary",grow:"",active:""},{default:d(()=>[i(C,{class:p(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/tv")}]),to:"/tv/"},{default:d(()=>[i(a,{icon:"fluent:tv-20-regular",width:"30px"}),Rt]),_:1},8,["class"]),i(C,{class:p(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/videos")}]),to:"/videos/"},{default:d(()=>[i(a,{icon:"fluent:movies-and-tv-20-regular",width:"30px"}),Tt]),_:1},8,["class"]),i(C,{class:p(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/reserves")}]),to:"/reserves/"},{default:d(()=>[i(a,{icon:"fluent:timer-16-regular",width:"30px"}),qt]),_:1},8,["class"]),i(C,{class:p(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/captures")}]),to:"/captures/"},{default:d(()=>[i(a,{icon:"fluent:image-multiple-24-regular",width:"30px"}),Lt]),_:1},8,["class"]),i(C,{class:p(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/mypage")}]),to:"/mypage/"},{default:d(()=>[i(a,{icon:"fluent:person-20-regular",width:"30px"}),zt]),_:1},8,["class"])]),_:1})}const Ut=E(At,[["render",Ht],["__scopeId","data-v-8139492e"]]),Ft=T({name:"Navigation",components:{BottomNavigation:Ut},computed:{...yt(Ct)},async created(){await this.versionStore.fetchServerVersion()}}),b=t=>(W("data-v-2b176113"),t=t(),V(),t),Mt={class:"navigation-container elevation-8"},Gt={class:"navigation"},Kt={class:"navigation-scroll"},Qt=b(()=>c("span",{class:"navigation__link-text"},"テレビをみる",-1)),Xt=b(()=>c("span",{class:"navigation__link-text"},"ビデオをみる",-1)),Yt=b(()=>c("span",{class:"navigation__link-text"},"番組表",-1)),Zt=b(()=>c("span",{class:"navigation__link-text"},"録画予約",-1)),jt=b(()=>c("span",{class:"navigation__link-text"},"キャプチャ",-1)),Jt=b(()=>c("span",{class:"navigation__link-text"},"マイリスト",-1)),Ot=b(()=>c("span",{class:"navigation__link-text"},"視聴履歴",-1)),ta=b(()=>c("span",{class:"navigation__link-text"},"設定",-1)),aa={class:"navigation__link-text"};function ea(t,r,a,u,s,e){const o=S("Icon"),v=S("router-link"),k=S("BottomNavigation"),n=bt("ftooltip");return h(),I("div",null,[c("div",Mt,[c("nav",Gt,[c("div",Kt,[g((h(),f(v,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/tv")}]),"active-class":"navigation__link--active",to:"/tv/"},{default:d(()=>[i(o,{class:"navigation__link-icon",icon:"fluent:tv-20-regular",width:"26px"}),Qt]),_:1},8,["class"])),[[m]]),g((h(),f(v,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/videos")}]),"active-class":"navigation__link--active",to:"/videos/"},{default:d(()=>[i(o,{class:"navigation__link-icon",icon:"fluent:movies-and-tv-20-regular",width:"26px"}),Xt]),_:1},8,["class"])),[[m]]),g((h(),f(v,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/timetable")}]),"active-class":"navigation__link--active",to:"/timetable/"},{default:d(()=>[i(o,{class:"navigation__link-icon",icon:"fluent:calendar-ltr-20-regular",width:"26px"}),Yt]),_:1},8,["class"])),[[m]]),g((h(),f(v,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/reserves")}]),"active-class":"navigation__link--active",to:"/reserves/"},{default:d(()=>[i(o,{class:"navigation__link-icon",icon:"fluent:timer-16-regular",width:"26px",style:{padding:"0.5px"}}),Zt]),_:1},8,["class"])),[[m]]),g((h(),f(v,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/captures")}]),"active-class":"navigation__link--active",to:"/captures/"},{default:d(()=>[i(o,{class:"navigation__link-icon",icon:"fluent:image-multiple-24-regular",width:"26px"}),jt]),_:1},8,["class"])),[[m]]),g((h(),f(v,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/mylist")}]),"active-class":"navigation__link--active",to:"/mylist/"},{default:d(()=>[i(o,{class:"navigation__link-icon",icon:"ic:round-playlist-play",width:"26px"}),Jt]),_:1},8,["class"])),[[m]]),g((h(),f(v,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/viewing-history")}]),"active-class":"navigation__link--active",to:"/viewing-history/"},{default:d(()=>[i(o,{class:"navigation__link-icon",icon:"fluent:history-20-regular",width:"26px"}),Ot]),_:1},8,["class"])),[[m]]),i(R),g((h(),f(v,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/settings")}]),"active-class":"navigation__link--active",to:"/settings/"},{default:d(()=>[i(o,{class:"navigation__link-icon",icon:"fluent:settings-20-regular",width:"26px"}),ta]),_:1},8,["class"])),[[m]]),g((h(),I("a",{class:p(["navigation__link",{"navigation__link--develop-version":t.versionStore.is_client_develop_version,"navigation__link--highlight":t.versionStore.is_update_available}]),"active-class":"navigation__link--active",href:"https://github.com/yyya-nico/KonomiTV",target:"_blank"},[i(o,{class:"navigation__link-icon",icon:"fluent:info-16-regular",width:"26px"}),c("span",aa,"version "+wt(t.versionStore.client_version),1)],2)),[[m],[n,t.versionStore.is_update_available?`アップデートがあります (version ${t.versionStore.latest_version})`:"",void 0,{top:!0}]])])])]),i(k)])}const ca=E(Ft,[["render",ea],["__scopeId","data-v-2b176113"]]);export{la as H,ca as N};
