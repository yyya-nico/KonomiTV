import{V as E,_ as z,u as R}from"./ssrBoot-BrosCCbY.js";import{_ as B,r as m,o as i,c as C,w as v,j as u,h as n,b as e,R as _,p as $,q as w,e as s,z as T,cE as F,A as G,c4 as U,cr as j,cq as q,dr as H,B as L,dd as J,cb as K,C as Y,ds as M,cJ as O,c7 as Q,bB as g,c6 as X,cv as Z,cx as tt,D as h,dt as et,cf as st,c8 as at,c3 as it,du as nt,c9 as x,n as o,V as S,G as A,I as ot,U as y,d as rt,m as lt,a as ct,t as vt}from"./top-laIxw7f5.js";const _t={},ut=t=>($("data-v-d7ed015a"),t=t(),w(),t),dt={class:"header"},gt=ut(()=>s("img",{class:"konomitv-logo__image",src:z,height:"21"},null,-1));function ht(t,l){const a=m("router-link");return i(),C("header",dt,[v((i(),u(a,{class:"konomitv-logo ml-3 ml-md-6",to:"/tv/"},{default:n(()=>[gt]),_:1})),[[_]]),e(E)])}const jt=B(_t,[["render",ht],["__scopeId","data-v-d7ed015a"]]),mt=T({bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...F(),...G(),...U(),...j(),...q(),...H({name:"bottom-navigation"}),...L({tag:"header"}),...J({modelValue:!0,selectedClass:"v-btn--selected"}),...K()},"VBottomNavigation"),ft=Y()({name:"VBottomNavigation",props:mt(),emits:{"update:modelValue":t=>!0},setup(t,l){let{slots:a}=l;const{themeClasses:I}=M(),{borderClasses:D}=O(t),{backgroundColorClasses:N,backgroundColorStyles:r}=Q(g(t,"bgColor")),{densityClasses:c}=X(t),{elevationClasses:p}=Z(t),{roundedClasses:k}=tt(t),{ssrBootStyles:P}=R(),b=h(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),f=g(t,"active"),{layoutItemStyles:W}=et({id:t.name,order:h(()=>parseInt(t.order,10)),position:h(()=>"bottom"),layoutSize:h(()=>f.value?b.value:0),elementSize:b,active:f,absolute:g(t,"absolute")});return st(t,nt),at({VBtn:{color:g(t,"color"),density:g(t,"density"),stacked:h(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),it(()=>e(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":f.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},I.value,N.value,D.value,c.value,p.value,k.value,t.class],style:[r.value,W.value,{height:x(b.value),transform:`translateY(${x(f.value?0:100,"%")})`},P.value,t.style]},{default:()=>[a.default&&e("div",{class:"v-bottom-navigation__content"},[a.default()])]})),{}}}),pt={},V=t=>($("data-v-ff080838"),t=t(),w(),t),kt=V(()=>s("span",{class:"mt-1"},"テレビをみる",-1)),bt=V(()=>s("span",{class:"mt-1"},"ビデオをみる",-1)),St=V(()=>s("span",{class:"mt-1"},"設定",-1));function yt(t,l){const a=m("Icon");return i(),u(ft,{class:"bottom-navigation-container elevation-12",color:"primary",grow:"",active:""},{default:n(()=>[e(S,{class:o(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/tv")}]),to:"/tv/"},{default:n(()=>[e(a,{icon:"fluent:tv-20-regular",width:"30px"}),kt]),_:1},8,["class"]),e(S,{class:o(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/videos")}]),to:"/videos/"},{default:n(()=>[e(a,{icon:"fluent:movies-and-tv-20-regular",width:"30px"}),bt]),_:1},8,["class"]),e(S,{class:o(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/settings")}]),to:"/settings/"},{default:n(()=>[e(a,{icon:"fluent:settings-20-regular",width:"30px"}),St]),_:1},8,["class"])]),_:1})}const Ct=B(pt,[["render",yt],["__scopeId","data-v-ff080838"]]);class Bt{static async fetchServerVersion(l=!1){const a=await A.get("/version");return a.type==="error"?(l===!1&&A.showGenericError(a,"バージョン情報を取得できませんでした。"),null):a.data}}const $t=ot("version",{state:()=>({server_version_info:null,last_updated_at:0}),getters:{client_version(){return y.version},server_version(){var t;return((t=this.server_version_info)==null?void 0:t.version)??null},latest_version(){var t;return((t=this.server_version_info)==null?void 0:t.latest_version)??null},is_client_develop_version(){return this.client_version.includes("-dev")},is_server_develop_version(){var t;return((t=this.server_version)==null?void 0:t.includes("-dev"))??!1},is_update_available(){return this.server_version===null||this.latest_version===null?!1:this.is_server_develop_version===!1&&this.server_version!==this.latest_version||this.is_server_develop_version===!0&&this.server_version.replace("-dev","")===this.latest_version},is_version_mismatch(){return this.server_version===null?!1:this.client_version!==this.server_version}},actions:{async fetchServerVersion(t=!1){if(this.server_version_info!==null&&t===!1)return y.time()-this.last_updated_at>60&&this.fetchServerVersion(!0),this.server_version_info;const l=await Bt.fetchServerVersion();return l===null?null:(this.server_version_info=l,this.last_updated_at=y.time(),this.server_version_info)}}}),wt=$t,Vt=rt({name:"Navigation",components:{BottomNavigation:Ct},computed:{...lt(wt)},async created(){await this.versionStore.fetchServerVersion()}}),d=t=>($("data-v-2980c68a"),t=t(),w(),t),It={class:"navigation-container elevation-8"},Dt={class:"navigation"},Nt={class:"navigation-scroll"},xt=d(()=>s("span",{class:"navigation__link-text"},"テレビをみる",-1)),At=d(()=>s("span",{class:"navigation__link-text"},"ビデオをみる",-1)),Et=d(()=>s("span",{class:"navigation__link-text"},"番組表",-1)),Pt=d(()=>s("span",{class:"navigation__link-text"},"録画予約",-1)),Wt=d(()=>s("span",{class:"navigation__link-text"},"マイリスト",-1)),zt=d(()=>s("span",{class:"navigation__link-text"},"キャプチャ",-1)),Rt=d(()=>s("span",{class:"navigation__link-text"},"設定",-1)),Tt={class:"navigation__link-text"};function Ft(t,l,a,I,D,N){const r=m("Icon"),c=m("router-link"),p=m("BottomNavigation"),k=ct("tooltip");return i(),C("div",null,[s("div",It,[s("nav",Dt,[s("div",Nt,[v((i(),u(c,{class:o(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/tv")}]),"active-class":"navigation__link--active",to:"/tv/"},{default:n(()=>[e(r,{class:"navigation__link-icon",icon:"fluent:tv-20-regular",width:"26px"}),xt]),_:1},8,["class"])),[[_]]),v((i(),u(c,{class:o(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/videos")}]),"active-class":"navigation__link--active",to:"/videos/"},{default:n(()=>[e(r,{class:"navigation__link-icon",icon:"fluent:movies-and-tv-20-regular",width:"26px"}),At]),_:1},8,["class"])),[[_]]),v((i(),u(c,{class:o(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/timetable")}]),"active-class":"navigation__link--active",to:"/timetable/"},{default:n(()=>[e(r,{class:"navigation__link-icon",icon:"fluent:calendar-ltr-20-regular",width:"26px"}),Et]),_:1},8,["class"])),[[_]]),v((i(),u(c,{class:o(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/reserves")}]),"active-class":"navigation__link--active",to:"/reserves/"},{default:n(()=>[e(r,{class:"navigation__link-icon",icon:"fluent:timer-16-regular",width:"26px",style:{padding:"0.5px"}}),Pt]),_:1},8,["class"])),[[_]]),v((i(),u(c,{class:o(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/mylist")}]),"active-class":"navigation__link--active",to:"/mylist/"},{default:n(()=>[e(r,{class:"navigation__link-icon",icon:"ic:round-playlist-play",width:"26px"}),Wt]),_:1},8,["class"])),[[_]]),v((i(),u(c,{class:o(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/captures")}]),"active-class":"navigation__link--active",to:"/captures/"},{default:n(()=>[e(r,{class:"navigation__link-icon",icon:"fluent:image-multiple-24-regular",width:"26px"}),zt]),_:1},8,["class"])),[[_]]),e(E),v((i(),u(c,{class:o(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/settings")}]),"active-class":"navigation__link--active",to:"/settings/"},{default:n(()=>[e(r,{class:"navigation__link-icon",icon:"fluent:settings-20-regular",width:"26px"}),Rt]),_:1},8,["class"])),[[_]]),v((i(),C("a",{class:o(["navigation__link",{"navigation__link--develop-version":t.versionStore.is_client_develop_version,"navigation__link--highlight":t.versionStore.is_update_available}]),"active-class":"navigation__link--active",href:"https://github.com/tsukumijima/KonomiTV"},[e(r,{class:"navigation__link-icon",icon:"fluent:info-16-regular",width:"26px"}),s("span",Tt,"version "+vt(t.versionStore.client_version),1)],2)),[[_],[k,t.versionStore.is_update_available?`アップデートがあります (version ${t.versionStore.latest_version})`:"",void 0,{top:!0}]])])])]),e(p)])}const qt=B(Vt,[["render",Ft],["__scopeId","data-v-2980c68a"]]);export{jt as H,qt as N,Bt as V,wt as u};
