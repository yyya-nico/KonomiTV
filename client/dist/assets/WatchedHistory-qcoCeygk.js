import{u as y,a as f,_ as v}from"./top-7PssjVa1.js";import{B as w}from"./Breadcrumbs-B_TyARkA.js";import{H as S,N as B}from"./Navigation-DSvq9cKh.js";import{S as b}from"./SPHeaderBar-BZGCm7eS.js";import{R as H}from"./RecordedProgramList-fLj2ehT7.js";import{V as M}from"./Videos-fhNRhef3.js";import{I as q,aF as I,W as i,N as l,M as N,aP as P,a5 as V,p as s,ay as d,$ as R}from"./SnackbarsStore-BWrzfOQC.js";import"./logo-BC5jga6u.js";import"./ssrBoot-DqZmwxAe.js";import"./VersionStore-CY9AnbST.js";import"./VDialog-BBp0Wqq7.js";import"./VChip-BkVKo0wH.js";import"./VTextField-B_VeYu6d.js";import"./VAvatar-C1iga1-m.js";import"./VCard-BjF_damY.js";import"./VSelect-BWIb6vsB.js";import"./VPagination-uW38qn5p.js";const W={class:"route-container"},k={class:"watched-history-container-wrapper"},x={class:"watched-history-container"},E=q({__name:"WatchedHistory",setup(L){const r=y(),h=f(),m=I(),n=i([]),c=i(0),t=i(!0),a=i(1),u=async()=>{const e=m.settings.watched_history.sort((p,_)=>_.updated_at-p.updated_at).map(p=>p.video_id);if(e.length===0){n.value=[],c.value=0,t.value=!1;return}const o=await M.fetchVideos("ids",a.value,e);o&&(n.value=o.recorded_programs,c.value=o.total),t.value=!1},g=async e=>{a.value=e,t.value=!0,await h.replace({query:{...r.query,page:e.toString()}})};return l(()=>r.query,async e=>{e.page&&(a.value=parseInt(e.page)),await u()},{deep:!0}),l(()=>m.settings.watched_history,async()=>{await u()},{deep:!0}),N(async()=>{await P().fetchUser(),r.query.page&&(a.value=parseInt(r.query.page)),await u()}),(e,o)=>(R(),V("div",W,[s(S),d("main",null,[s(B),s(b,{"hide-on-smartphone-vertical":!0}),d("div",k,[d("div",x,[s(w,{crumbs:[{name:"ホーム",path:"/"},{name:"視聴履歴",path:"/watched-history/",disabled:!0}]}),s(H,{title:"視聴履歴",programs:n.value,total:c.value,page:a.value,hideSort:!0,isLoading:t.value,showBackButton:!0,showEmptyMessage:!t.value,emptyIcon:"fluent:history-20-regular",emptyMessage:"まだ視聴履歴がありません。",emptySubMessage:"録画番組を30秒以上みると、<br class='d-sm-none'>視聴履歴に追加されます。",forWatchedHistory:!0,"onUpdate:page":g},null,8,["programs","total","page","isLoading","showEmptyMessage"])])])])]))}}),ee=v(E,[["__scopeId","data-v-22037e5b"]]);export{ee as default};
