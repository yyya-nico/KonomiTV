import{x as u,az as r,aI as m,aH as s,Y as d,T as p,$ as f,at as n,k as e,a2 as a,au as h,Q as _,R as V}from"./SnackbarsStore-DxiM_ro_.js";import{u as v}from"./VersionStore-DahI3rR2.js";import{_ as w,w as x,V as S}from"./top-CAFd2Mhb.js";import{_ as C}from"./logo-Bm6vWhdq.js";import{V as y,a as B}from"./VCard-Cunm2MW2.js";import{V as I,a as $}from"./VTextField-CQX4AK8g.js";import{V as g}from"./VForm-Bgra8Evq.js";import"./VAvatar-CLXTnYHa.js";const b=u({name:"Connect",data(){return{is_form_dense:r.isSmartphoneHorizontal(),host:""}},computed:{...m(v)},methods:{async connect(){if(this.host===""){s.error("ホストが空です。");return}else if(!/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])(:[0-9]+)?$/.test(this.host)){s.error("IPv4のホストを入力してください。");return}const t=this.host.split(":"),o=`${t[0].replaceAll(".","-")}.local.konomi.tv:${t[1]??7e3}`;if(r.saveApiHost(o),await this.versionStore.fetchServerVersion(!0)===null){s.error("接続先ホストはKonomiTVサーバーではありません。"),r.deleteApiHost();return}this.versionStore.is_version_mismatch&&s.warning("このKonomiTVクライアントとKonomiTVサーバーのバージョンが異なるため、正常な動作が保証されません。"),await this.$router.replace({path:"/tv/"})}}}),i=t=>(_("data-v-e9483f94"),t=t(),V(),t),A={class:"route-container"},T={class:"connect-container-wrapper d-flex align-center w-100 mb-13"},k=i(()=>n("img",{class:"d-block",src:C,style:{"max-width":"250px"}},null,-1)),D=i(()=>n("h4",{class:"mt-10"},"接続",-1));function H(t,o,F,K,N,z){const c=d("Icon");return p(),f("div",A,[n("main",null,[n("div",T,[e(y,{class:"connect-container px-10 pt-8 pb-11 mx-auto",elevation:"10",width:"100%","max-width":"450"},{default:a(()=>[e(B,{class:"connect__logo py-4 d-flex flex-column justify-center align-center"},{default:a(()=>[k,D]),_:1}),e(I),e(g,{ref:"connect",onSubmit:x(t.connect,["prevent"])},{default:a(()=>[e($,{class:"mt-12",color:"primary",variant:"outlined",placeholder:"ホスト",autofocus:"",hint:"IPv4のホストを入力してください。",density:t.is_form_dense?"compact":"default",modelValue:t.host,"onUpdate:modelValue":o[0]||(o[0]=l=>t.host=l)},null,8,["density","modelValue"]),e(S,{type:"submit",class:"connect-button mt-5",color:"secondary",variant:"flat",width:"100%",height:"56"},{default:a(()=>[e(c,{icon:"fa:sign-in",class:"mr-2"}),h("接続 ")]),_:1})]),_:1},8,["onSubmit"])]),_:1})])])])}const q=w(b,[["render",H],["__scopeId","data-v-e9483f94"]]);export{q as default};
