import{u as W,b as w,f as X,d as Y,e as Z,m as ee,g as le,h as te}from"./VTextField-9UlAKFMF.js";import{g as ne,p as ae,l as ue,h as ie,a6 as B,a7 as R,e as oe,i as se,a8 as re}from"./top-DBGW_dS-.js";import{c as ce}from"./VChip-B9uqiyV1.js";import{ah as s,V as p,N as de,p as n,aa as y,F as h,D as fe}from"./SnackbarsStore-DIk21UOt.js";const ve=ae({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...ee({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>B(e).every(d=>d!=null&&typeof d=="object")},...Z({clearable:!0})},"VFileInput"),Ce=ne()({name:"VFileInput",inheritAttrs:!1,props:ve(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,d){let{attrs:N,emit:g,slots:a}=d;const{t:C}=ue(),t=ie(e,"modelValue",e.modelValue,l=>B(l),l=>!e.multiple&&Array.isArray(l)?l[0]:l),{isFocused:f,focus:D,blur:M}=W(e),V=s(()=>typeof e.showSize!="boolean"?e.showSize:void 0),k=s(()=>(t.value??[]).reduce((l,o)=>{let{size:r=0}=o;return l+r},0)),I=s(()=>R(k.value,V.value)),v=s(()=>(t.value??[]).map(l=>{const{name:o="",size:r=0}=l;return e.showSize?`${o} (${R(r,V.value)})`:o})),$=s(()=>{const l=t.value?.length??0;return e.showSize?C(e.counterSizeString,l,I.value):C(e.counterString,l)}),b=p(),F=p(),u=p(),x=s(()=>f.value||e.active),S=s(()=>["plain","underlined"].includes(e.variant));function m(){u.value!==document.activeElement&&u.value?.focus(),f.value||D()}function j(l){u.value?.click()}function E(l){g("mousedown:control",l)}function O(l){u.value?.click(),g("click:control",l)}function U(l){l.stopPropagation(),m(),fe(()=>{t.value=[],re(e["onClick:clear"],l)})}return de(t,l=>{(!Array.isArray(l)||!l.length)&&u.value&&(u.value.value="")}),oe(()=>{const l=!!(a.counter||e.counter),o=!!(l||a.details),[r,L]=se(N),{modelValue:me,...T}=w.filterProps(e),_=X(e);return n(w,y({ref:b,modelValue:t.value,"onUpdate:modelValue":c=>t.value=c,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":S.value},e.class],style:e.style,"onClick:prepend":j},r,T,{centerAffix:!S.value,focused:f.value}),{...a,default:c=>{let{id:q,isDisabled:P,isDirty:z,isReadonly:A,isValid:G}=c;return n(te,y({ref:F,"prepend-icon":e.prependIcon,onMousedown:E,onClick:O,"onClick:clear":U,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},_,{id:q.value,active:x.value||z.value,dirty:z.value||e.dirty,disabled:P.value,focused:f.value,error:G.value===!1}),{...a,default:H=>{let{props:{class:J,...K}}=H;return n(h,null,[n("input",y({ref:u,type:"file",readonly:A.value,disabled:P.value,multiple:e.multiple,name:e.name,onClick:i=>{i.stopPropagation(),A.value&&i.preventDefault(),m()},onChange:i=>{if(!i.target)return;const Q=i.target;t.value=[...Q.files??[]]},onFocus:m,onBlur:M},K,L),null),n("div",{class:J},[!!t.value?.length&&!e.hideInput&&(a.selection?a.selection({fileNames:v.value,totalBytes:k.value,totalBytesReadable:I.value}):e.chips?v.value.map(i=>n(ce,{key:i,size:"small",text:i},null)):v.value.join(", "))])])}})},details:o?c=>n(h,null,[a.details?.(c),l&&n(h,null,[n("span",null,null),n(le,{active:!!t.value?.length,value:$.value,disabled:e.disabled},a.counter)])]):void 0})}),Y({},b,F,u)}});export{Ce as V};
