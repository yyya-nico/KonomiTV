import{u as f,a as y,_ as v}from"./top-Ra0pbfKg.js";import{B as w}from"./Breadcrumbs-BJ2QQv0B.js";import{H as S,N as B}from"./Navigation-BG-VQcp_.js";import{R as M}from"./RecordedProgramList-DHCDln3H.js";import{V as b}from"./Videos-CrEKWVpv.js";import{I as q,aF as H,W as o,N as l,M as I,aP as N,a5 as V,p as i,ay as d,$ as P}from"./SnackbarsStore-D2723teg.js";import"./logo-DS3Ny_pw.js";import"./ssrBoot-9bFU7tTc.js";import"./VersionStore-Vd_xoAev.js";import"./VDialog-Bp2QFNGD.js";import"./VChip-CCklXAW-.js";import"./VTextField-B6HwneY5.js";import"./VAvatar-Dxt8YX1N.js";import"./VCard-D_Ycheih.js";import"./VSelect-Ci4G1wYq.js";import"./VPagination-Da-TfPkq.js";const R={class:"route-container"},W={class:"watched-history-container-wrapper"},k={class:"watched-history-container"},x=q({__name:"WatchedHistory",setup(E){const s=f(),g=y(),m=H(),n=o([]),c=o(0),t=o(!0),a=o(1),u=async()=>{const e=m.settings.watched_history.sort((p,_)=>_.updated_at-p.updated_at).map(p=>p.video_id);if(e.length===0){n.value=[],c.value=0,t.value=!1;return}const r=await b.fetchVideos("ids",a.value,e);r&&(n.value=r.recorded_programs,c.value=r.total),t.value=!1},h=async e=>{a.value=e,t.value=!0,await g.replace({query:{...s.query,page:e.toString()}})};return l(()=>s.query,async e=>{e.page&&(a.value=parseInt(e.page)),await u()},{deep:!0}),l(()=>m.settings.watched_history,async()=>{await u()},{deep:!0}),I(async()=>{await N().fetchUser(),s.query.page&&(a.value=parseInt(s.query.page)),await u()}),(e,r)=>(P(),V("div",R,[i(S),d("main",null,[i(B),d("div",W,[d("div",k,[i(w,{crumbs:[{name:"ホーム",path:"/"},{name:"視聴履歴",path:"/watched-history/",disabled:!0}]}),i(M,{title:"視聴履歴",programs:n.value,total:c.value,page:a.value,hideSort:!0,isLoading:t.value,showBackButton:!0,showEmptyMessage:!t.value,emptyIcon:"fluent:history-20-regular",emptyMessage:"まだ視聴履歴がありません。",emptySubMessage:"録画番組を30秒以上みると、<br class='d-sm-none'>視聴履歴に追加されます。",forWatchedHistory:!0,"onUpdate:page":h},null,8,["programs","total","page","isLoading","showEmptyMessage"])])])])]))}}),Z=v(x,[["__scopeId","data-v-4f932ff9"]]);export{Z as default};
