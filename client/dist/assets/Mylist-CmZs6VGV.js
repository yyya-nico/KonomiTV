import{u as S,a as w,_ as q}from"./top-CVL1Mdz_.js";import{B}from"./Breadcrumbs-CdMkE8wE.js";import{H as M,N as P}from"./Navigation-BgLsnzBJ.js";import{S as b}from"./SPHeaderBar-Cf4fQ3ED.js";import{R as I}from"./RecordedProgramList-D4he0X77.js";import{V as N}from"./Videos-fhNRhef3.js";import{I as R,aF as V,W as c,N as v,M as O,aP as U,a5 as k,p as u,ay as _,$ as x}from"./SnackbarsStore-BWrzfOQC.js";import"./logo-Dqywi0E_.js";import"./ssrBoot-BCdXxp7H.js";import"./VersionStore-CY9AnbST.js";import"./VDialog-CehQHqjv.js";import"./VChip-CVI1DE67.js";import"./VTextField-BfFuH-mY.js";import"./VAvatar-J9qAX-lr.js";import"./VCard-BNwTeWQJ.js";import"./VSelect-CcKj8-H7.js";import"./VPagination-CSS5MfHE.js";const E={class:"route-container"},H={class:"mylist-container-wrapper"},L={class:"mylist-container"},C=R({__name:"Mylist",setup(F){const t=S(),y=w(),g=V(),n=c([]),l=c(0),s=c(!0),o=c(1),a=c("mylist_added_desc"),p=async()=>{const e=g.settings.mylist.filter(r=>r.type==="RecordedProgram").sort((r,m)=>{switch(a.value){case"mylist_added_desc":return m.created_at-r.created_at;case"mylist_added_asc":return r.created_at-m.created_at;case"recorded_desc":case"recorded_asc":return m.created_at-r.created_at;default:return 0}}).map(r=>r.id);if(e.length===0){n.value=[],l.value=0,s.value=!1;return}let i="ids";a.value==="recorded_desc"?i="desc":a.value==="recorded_asc"&&(i="asc");const d=await N.fetchVideos(i,o.value,e);d&&(n.value=d.recorded_programs,l.value=d.total),s.value=!1},f=async e=>{o.value=e,s.value=!0,await y.replace({query:{...t.query,page:e.toString()}})},h=async e=>{a.value=e,o.value=1,s.value=!0,await y.replace({query:{...t.query,order:e,page:"1"}})};return v(()=>t.query,async e=>{e.page&&(o.value=parseInt(e.page)),e.order&&(a.value=e.order),await p()},{deep:!0}),v(()=>g.settings.mylist,async()=>{await p()},{deep:!0}),O(async()=>{await U().fetchUser(),t.query.page&&(o.value=parseInt(t.query.page)),t.query.order&&(a.value=t.query.order),await p()}),(e,i)=>(x(),k("div",E,[u(M),_("main",null,[u(P),u(b,{"hide-on-smartphone-vertical":!0}),_("div",H,[_("div",L,[u(B,{crumbs:[{name:"ホーム",path:"/"},{name:"マイリスト",path:"/mylist/",disabled:!0}]}),u(I,{title:"マイリスト",programs:n.value,total:l.value,page:o.value,sortOrder:a.value,isLoading:s.value,showBackButton:!0,showEmptyMessage:!s.value,emptyIcon:"ic:round-playlist-play",emptyMessage:"あとで観たい番組を<br class='d-sm-none'>マイリストに保存できます。",emptySubMessage:"録画番組の右上にある ＋ ボタンから、<br class='d-sm-none'>番組をマイリストに追加できます。",forMylist:!0,"onUpdate:page":f,"onUpdate:sortOrder":i[0]||(i[0]=d=>h(d))},null,8,["programs","total","page","sortOrder","isLoading","showEmptyMessage"])])])])]))}}),re=q(C,[["__scopeId","data-v-d97dc51b"]]);export{re as default};
