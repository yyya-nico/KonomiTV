import{aV as t,c7 as n,aC as s}from"./SnackbarsStore-DIk21UOt.js";class o{static async fetchServerVersion(e=!1){const r=await t.get("/version");return r.type==="error"?(e===!1&&t.showGenericError(r,"バージョン情報を取得できませんでした。"),null):r.data}}const l=n("version",{state:()=>({server_version_info:null,last_updated_at:0}),getters:{client_version(){return s.version},server_version(){return this.server_version_info?.version??null},latest_version(){return this.server_version_info?.latest_version??null},is_client_develop_version(){return this.client_version.includes("-dev")},is_server_develop_version(){return this.server_version?.includes("-dev")??!1},is_update_available(){return this.server_version===null||this.latest_version===null?!1:this.is_server_develop_version===!1&&this.server_version!==this.latest_version||this.is_server_develop_version===!0&&this.server_version.replace("-dev","")===this.latest_version},is_version_mismatch(){return this.server_version===null?!1:this.client_version!==this.server_version}},actions:{async fetchServerVersion(i=!1){if(this.server_version_info!==null&&i===!1)return s.time()-this.last_updated_at>60&&this.fetchServerVersion(!0),this.server_version_info;const e=await o.fetchServerVersion();return e===null?null:(this.server_version_info=e,this.last_updated_at=s.time(),this.server_version_info)}}});export{o as V,l as u};
