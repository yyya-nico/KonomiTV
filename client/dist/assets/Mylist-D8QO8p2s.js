import{u as w,a as q,_ as M}from"./top-OuqvGzs1.js";import{B}from"./VPagination-Ceu2FGvs.js";import{H as S,N as V}from"./Navigation-BXzXf_MR.js";import{R as I}from"./RecordedProgramList-BT61lVs6.js";import{V as N}from"./Videos-CqvnItO-.js";import{I as R,aE as b,V as i,N as v,M as E,a4 as O,p as l,aw as _,_ as P}from"./SnackbarsStore-D4uwPXBo.js";import"./logo-CDToo6Ak.js";import"./ssrBoot-BucdMdVy.js";import"./VersionStore-BG5o3nvS.js";import"./VDialog-BcrL8Vl9.js";import"./VChip-CPl9lM8B.js";import"./VTextField-CqXFbFa3.js";import"./VAvatar-C2dh0P45.js";import"./VCard-BvKAghTU.js";import"./VSelect-DLg5RPgH.js";const k={class:"route-container"},x={class:"mylist-container-wrapper"},L={class:"mylist-container"},H=R({__name:"Mylist",setup(U){const a=w(),g=q(),y=b(),n=i([]),u=i(0),s=i(!0),o=i(1),t=i("mylist_added_desc"),p=async()=>{const e=y.settings.mylist.filter(r=>r.type==="RecordedProgram").sort((r,m)=>{switch(t.value){case"mylist_added_desc":return m.created_at-r.created_at;case"mylist_added_asc":return r.created_at-m.created_at;case"recorded_desc":case"recorded_asc":return m.created_at-r.created_at;default:return 0}}).map(r=>r.id);if(e.length===0){n.value=[],u.value=0,s.value=!1;return}let c="ids";t.value==="recorded_desc"?c="desc":t.value==="recorded_asc"&&(c="asc");const d=await N.fetchVideos(c,o.value,e);d&&(n.value=d.recorded_programs,u.value=d.total),s.value=!1},f=async e=>{o.value=e,s.value=!0,await g.replace({query:{...a.query,page:e.toString()}})},h=async e=>{t.value=e,o.value=1,s.value=!0,await g.replace({query:{...a.query,order:e,page:"1"}})};return v(()=>a.query,async e=>{e.page&&(o.value=parseInt(e.page)),e.order&&(t.value=e.order),await p()},{deep:!0}),v(()=>y.settings.mylist,async()=>{await p()},{deep:!0}),E(async()=>{a.query.page&&(o.value=parseInt(a.query.page)),a.query.order&&(t.value=a.query.order),await p()}),(e,c)=>(P(),O("div",k,[l(S),_("main",null,[l(V),_("div",x,[_("div",L,[l(B,{crumbs:[{name:"ホーム",path:"/"},{name:"マイリスト",path:"/mylist/",disabled:!0}]}),l(I,{title:"マイリスト",programs:n.value,total:u.value,page:o.value,sortOrder:t.value,isLoading:s.value,showBackButton:!0,showEmptyMessage:!s.value,emptyIcon:"ic:round-playlist-play",emptyMessage:"あとで見たい番組を<br class='d-sm-none'>マイリストに保存できます。",emptySubMessage:"録画番組の右上にある ＋ ボタンから、<br class='d-sm-none'>番組をマイリストに追加できます。",forMylist:!0,"onUpdate:page":f,"onUpdate:sortOrder":c[0]||(c[0]=d=>h(d))},null,8,["programs","total","page","sortOrder","isLoading","showEmptyMessage"])])])])]))}}),Q=M(H,[["__scopeId","data-v-343c315e"]]);export{Q as default};
