import{x as u,az as r,aI as m,aH as s,Y as d,T as p,$ as f,at as n,k as t,a2 as a,au as h,Q as _,R as V}from"./SnackbarsStore-DxiM_ro_.js";import{V as v,u as w}from"./VersionStore-DPzwN7Gd.js";import{_ as S,w as x,V as C}from"./top-B4KzyOz0.js";import{_ as y}from"./logo-DpvAjxPw.js";import{V as B,a as I}from"./VCard--mvGKvr1.js";import{V as $,a as g}from"./VTextField-CMgJtGea.js";import{V as b}from"./VForm-BoSFhKX8.js";import"./VAvatar-USF0KqDi.js";const A=u({name:"Connect",data(){return{is_form_dense:r.isSmartphoneHorizontal(),host:""}},computed:{...m(w)},methods:{async connect(){if(this.host===""){s.error("ホストが空です。");return}else if(!/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])(:[0-9]+)?$/.test(this.host)){s.error("IPv4のホストを入力してください。");return}const e=this.host.split(":"),o=`${e[0].replaceAll(".","-")}.local.konomi.tv:${e[1]??7e3}`;if(r.saveApiHost(o),await v.fetchServerVersion(!0)===null){s.error("接続先ホストはKonomiTVサーバーではありません。"),r.deleteApiHost();return}await this.versionStore.fetchServerVersion(!0),this.versionStore.is_version_mismatch&&s.warning("このKonomiTVクライアントとKonomiTVサーバーのバージョンが異なるため、正常な動作が保証されません。"),await this.$router.replace({path:"/tv/"})}}}),i=e=>(_("data-v-e8fd4385"),e=e(),V(),e),T={class:"route-container"},k={class:"connect-container-wrapper d-flex align-center w-100 mb-13"},D=i(()=>n("img",{class:"d-block",src:y,style:{"max-width":"250px"}},null,-1)),H=i(()=>n("h4",{class:"mt-10"},"接続",-1));function F(e,o,K,N,z,E){const c=d("Icon");return p(),f("div",T,[n("main",null,[n("div",k,[t(B,{class:"connect-container px-10 pt-8 pb-11 mx-auto",elevation:"10",width:"100%","max-width":"450"},{default:a(()=>[t(I,{class:"connect__logo py-4 d-flex flex-column justify-center align-center"},{default:a(()=>[D,H]),_:1}),t($),t(b,{ref:"connect",onSubmit:x(e.connect,["prevent"])},{default:a(()=>[t(g,{class:"mt-12",color:"primary",variant:"outlined",placeholder:"ホスト",autofocus:"",hint:"IPv4のホストを入力してください。",density:e.is_form_dense?"compact":"default",modelValue:e.host,"onUpdate:modelValue":o[0]||(o[0]=l=>e.host=l)},null,8,["density","modelValue"]),t(C,{type:"submit",class:"connect-button mt-5",color:"secondary",variant:"flat",width:"100%",height:"56"},{default:a(()=>[t(c,{icon:"fa:sign-in",class:"mr-2"}),h("接続 ")]),_:1})]),_:1},8,["onSubmit"])]),_:1})])])])}const G=S(A,[["render",F],["__scopeId","data-v-e8fd4385"]]);export{G as default};
