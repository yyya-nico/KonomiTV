import{u as R,j as D,v as T,V as w,a as q,R as f,_ as W,g as z,p as L,b7 as H,ap as M,a6 as G,a5 as U,ak as K,al as j,f as A,b8 as F,a1 as Z,a7 as J,d as O,k as Q,a2 as X,aZ as Y,m as tt,b9 as at,af as et,ag as nt,a8 as it,b as st,ah as ot,ba as lt}from"./top-Ra0pbfKg.js";import{_ as rt}from"./logo-DS3Ny_pw.js";import{V as N,u as ct}from"./ssrBoot-9bFU7tTc.js";import{I as P,W as V,M as ut,N as vt,ai as b,a5 as C,a4 as m,p as o,a6 as dt,ay as r,_ as k,a8 as d,a2 as S,G as _t,az as ht,$ as h,ar as $,ad as p,aM as pt,a3 as gt,ax as mt}from"./SnackbarsStore-D2723teg.js";import{u as ft}from"./VersionStore-Vd_xoAev.js";function kt(t,a,e,v){function s(n){return n instanceof e?n:new e(function(l){l(n)})}return new(e||(e=Promise))(function(n,l){function u(_){try{i(v.next(_))}catch(c){l(c)}}function y(_){try{i(v.throw(_))}catch(c){l(c)}}function i(_){_.done?n(_.value):s(_.value).then(u,y)}i((v=v.apply(t,[])).next())})}function yt(t,a){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},v,s,n,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(i){return function(_){return y([i,_])}}function y(i){if(v)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(e=0)),e;)try{if(v=1,s&&(n=i[0]&2?s.return:i[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,i[1])).done)return n;switch(s=0,n&&(i=[i[0]&2,n.value]),i[0]){case 0:case 1:n=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,s=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){e.label=i[1];break}if(i[0]===6&&e.label<n[1]){e.label=n[1],n=i;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(i);break}n[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(_){i=[6,_],s=0}finally{v=n=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}var bt=function(){function t(){var a=this;this.event=null,this.callbacks=[],this.install=function(){return kt(a,void 0,void 0,function(){var e=this;return yt(this,function(v){switch(v.label){case 0:return this.event?(this.event.prompt(),[4,this.event.userChoice.then(function(s){var n=s.outcome;return e.updateEvent(null),n==="accepted"})]):[3,2];case 1:return[2,v.sent()];case 2:throw new Error("Not allowed to prompt.")}})})},!(typeof window>"u")&&(window.addEventListener("beforeinstallprompt",function(e){e.preventDefault(),a.updateEvent(e)}),window.addEventListener("appinstalled",function(){a.updateEvent(null)}))}return t.prototype.getEvent=function(){return this.event},t.prototype.canInstall=function(){return this.event!==null},t.prototype.updateEvent=function(a){var e=this;a!==this.event&&(this.event=a,this.callbacks.forEach(function(v){return v(e.canInstall())}))},t.prototype.addListener=function(a){a(this.canInstall()),this.callbacks.push(a)},t.prototype.removeListener=function(a){this.callbacks=this.callbacks.filter(function(e){return a!==e})},t}(),E=new bt;const wt={class:"header"},St={key:0,class:"search-box"},$t=["placeholder"],Ct=P({__name:"HeaderBar",setup(t){const a=V(!1),e=V(""),v=q(),s=R(),n=()=>{s.path.endsWith("/search")&&s.query.query&&(e.value=decodeURIComponent(s.query.query))};ut(()=>{E.addListener(c=>{a.value=c}),n()}),vt(()=>s.fullPath,n);const l=b(()=>s.path.startsWith("/videos")||s.path.startsWith("/mylist")||s.path.startsWith("/watched-history")?"録画番組を検索...":"放送予定の番組を検索..."),u=()=>s.path.startsWith("/videos")||s.path.startsWith("/mylist")||s.path.startsWith("/watched-history")?"/videos/search":"/tv/search",y=c=>{c.key==="Enter"&&!c.isComposing&&i()},i=()=>{if(e.value.trim()){const c=u();v.push(`${c}?query=${encodeURIComponent(e.value.trim())}`)}},_=b(()=>{const c=s.path;return!c.startsWith("/captures")&&!c.startsWith("/settings")&&!c.startsWith("/login")&&!c.startsWith("/register")});return(c,g)=>{const x=S("router-link"),B=S("Icon");return h(),C("header",wt,[m((h(),k(x,{class:"konomitv-logo ml-3 ml-md-6",to:"/tv/"},{default:d(()=>[...g[2]||(g[2]=[r("img",{class:"konomitv-logo__image",src:rt,height:"21"},null,-1)])]),_:1})),[[f]]),o(N),_.value?(h(),C("div",St,[m(r("input",{class:"search-input",type:"search",enterkeyhint:"search",placeholder:l.value,"onUpdate:modelValue":g[0]||(g[0]=I=>e.value=I),onKeydown:y},null,40,$t),[[D,e.value]]),o(B,{class:"search-input__icon",icon:"fluent:search-20-filled",height:"24px",onClick:i})])):dt("",!0),m(o(w,{variant:"flat",class:"pwa-install-button",onClick:g[1]||(g[1]=I=>_t(E).install())},{default:d(()=>[o(B,{icon:"material-symbols:install-desktop-rounded",height:"20px",class:"mr-1"}),g[3]||(g[3]=ht(" アプリとしてインストール ",-1))]),_:1},512),[[T,a.value]]),g[4]||(g[4]=r("div",{class:"mr-3 mr-md-6"},null,-1))])}}}),Gt=W(Ct,[["__scopeId","data-v-fd8ec2e9"]]),xt=L({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...ot(),...st(),...it(),...nt(),...et(),...at({name:"bottom-navigation"}),...tt({tag:"header"}),...Y({selectedClass:"v-btn--selected"}),...X()},"VBottomNavigation"),Wt=z()({name:"VBottomNavigation",props:xt(),emits:{"update:active":t=>!0,"update:modelValue":t=>!0},setup(t,a){let{slots:e}=a;const{themeClasses:v}=H(),{borderClasses:s}=M(t),{backgroundColorClasses:n,backgroundColorStyles:l}=G($(t,"bgColor")),{densityClasses:u}=U(t),{elevationClasses:y}=K(t),{roundedClasses:i}=j(t),{ssrBootStyles:_}=ct(),c=b(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),g=A(t,"active",t.active),{layoutItemStyles:x}=F({id:t.name,order:b(()=>parseInt(t.order,10)),position:b(()=>"bottom"),layoutSize:b(()=>g.value?c.value:0),elementSize:c,active:g,absolute:$(t,"absolute")});return Z(t,lt),J({VBtn:{baseColor:$(t,"baseColor"),color:$(t,"color"),density:$(t,"density"),stacked:b(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),O(()=>o(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":g.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},v.value,n.value,s.value,u.value,y.value,i.value,t.class],style:[l.value,x.value,{height:Q(c.value)},_.value,t.style]},{default:()=>[e.default&&o("div",{class:"v-bottom-navigation__content"},[e.default()])]})),{}}}),Bt={};function It(t,a){const e=S("Icon");return h(),k(Wt,{class:"bottom-navigation-container elevation-12",color:"primary",grow:"",active:""},{default:d(()=>[o(w,{class:p(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/tv")}]),to:"/tv/"},{default:d(()=>[o(e,{icon:"fluent:tv-20-regular",width:"30px"}),a[0]||(a[0]=r("span",{class:"mt-1"},"テレビをみる",-1))]),_:1},8,["class"]),o(w,{class:p(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/videos")}]),to:"/videos/"},{default:d(()=>[o(e,{icon:"fluent:movies-and-tv-20-regular",width:"30px"}),a[1]||(a[1]=r("span",{class:"mt-1"},"ビデオをみる",-1))]),_:1},8,["class"]),o(w,{class:p(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/reservations")}]),to:"/reservations/"},{default:d(()=>[o(e,{icon:"fluent:timer-16-regular",width:"30px"}),a[2]||(a[2]=r("span",{class:"mt-1"},"録画予約",-1))]),_:1},8,["class"]),o(w,{class:p(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/captures")}]),to:"/captures/"},{default:d(()=>[o(e,{icon:"fluent:image-multiple-24-regular",width:"30px"}),a[3]||(a[3]=r("span",{class:"mt-1"},"キャプチャ",-1))]),_:1},8,["class"]),o(w,{class:p(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/mypage")}]),to:"/mypage/"},{default:d(()=>[o(e,{icon:"fluent:person-20-regular",width:"30px"}),a[4]||(a[4]=r("span",{class:"mt-1"},"マイページ",-1))]),_:1},8,["class"])]),_:1})}const Vt=W(Bt,[["render",It],["__scopeId","data-v-58f8356e"]]),Et=P({name:"Navigation",components:{BottomNavigation:Vt},computed:{...pt(ft)},async created(){await this.versionStore.fetchServerVersion()}}),Nt={class:"navigation-container elevation-8"},Pt={class:"navigation"},Rt={class:"navigation-scroll"},Dt={class:"navigation__link-text"};function Tt(t,a,e,v,s,n){const l=S("Icon"),u=S("router-link"),y=S("BottomNavigation"),i=gt("ftooltip");return h(),C("div",null,[r("div",Nt,[r("nav",Pt,[r("div",Rt,[m((h(),k(u,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/tv")}]),"active-class":"navigation__link--active",to:"/tv/"},{default:d(()=>[o(l,{class:"navigation__link-icon",icon:"fluent:tv-20-regular",width:"26px"}),a[0]||(a[0]=r("span",{class:"navigation__link-text"},"テレビをみる",-1))]),_:1},8,["class"])),[[f]]),m((h(),k(u,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/videos")}]),"active-class":"navigation__link--active",to:"/videos/"},{default:d(()=>[o(l,{class:"navigation__link-icon",icon:"fluent:movies-and-tv-20-regular",width:"26px"}),a[1]||(a[1]=r("span",{class:"navigation__link-text"},"ビデオをみる",-1))]),_:1},8,["class"])),[[f]]),m((h(),k(u,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/timetable")}]),"active-class":"navigation__link--active",to:"/timetable/"},{default:d(()=>[o(l,{class:"navigation__link-icon",icon:"fluent:calendar-ltr-20-regular",width:"26px"}),a[2]||(a[2]=r("span",{class:"navigation__link-text"},"番組表",-1))]),_:1},8,["class"])),[[f]]),m((h(),k(u,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/pastepg")}]),"active-class":"navigation__link--active",to:"/pastepg/"},{default:d(()=>[o(l,{class:"navigation__link-icon",icon:"fluent:calendar-ltr-20-regular",width:"26px"}),a[3]||(a[3]=r("span",{class:"navigation__link-text"},"過去番組表",-1))]),_:1},8,["class"])),[[f]]),m((h(),k(u,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/reservations")}]),"active-class":"navigation__link--active",to:"/reservations/"},{default:d(()=>[o(l,{class:"navigation__link-icon",icon:"fluent:timer-16-regular",width:"26px",style:{padding:"0.5px"}}),a[4]||(a[4]=r("span",{class:"navigation__link-text"},"録画予約",-1))]),_:1},8,["class"])),[[f]]),m((h(),k(u,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/captures")}]),"active-class":"navigation__link--active",to:"/captures/"},{default:d(()=>[o(l,{class:"navigation__link-icon",icon:"fluent:image-multiple-24-regular",width:"26px"}),a[5]||(a[5]=r("span",{class:"navigation__link-text"},"キャプチャ",-1))]),_:1},8,["class"])),[[f]]),m((h(),k(u,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/mylist")}]),"active-class":"navigation__link--active",to:"/mylist/"},{default:d(()=>[o(l,{class:"navigation__link-icon",icon:"ic:round-playlist-play",width:"26px"}),a[6]||(a[6]=r("span",{class:"navigation__link-text"},"マイリスト",-1))]),_:1},8,["class"])),[[f]]),m((h(),k(u,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/watched-history")}]),"active-class":"navigation__link--active",to:"/watched-history/"},{default:d(()=>[o(l,{class:"navigation__link-icon",icon:"fluent:history-20-regular",width:"26px"}),a[7]||(a[7]=r("span",{class:"navigation__link-text"},"視聴履歴",-1))]),_:1},8,["class"])),[[f]]),o(N),m((h(),k(u,{class:p(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/settings")}]),"active-class":"navigation__link--active",to:"/settings/"},{default:d(()=>[o(l,{class:"navigation__link-icon",icon:"fluent:settings-20-regular",width:"26px"}),a[8]||(a[8]=r("span",{class:"navigation__link-text"},"設定",-1))]),_:1},8,["class"])),[[f]]),m((h(),C("a",{class:p(["navigation__link",{"navigation__link--develop-version":t.versionStore.is_client_develop_version,"navigation__link--highlight":t.versionStore.is_update_available}]),"active-class":"navigation__link--active",href:"https://github.com/yyya-nico/KonomiTV",target:"_blank"},[o(l,{class:"navigation__link-icon",icon:"fluent:info-16-regular",width:"26px"}),r("span",Dt,"version "+mt(t.versionStore.client_version),1)],2)),[[f],[i,t.versionStore.is_update_available?`アップデートがあります (version ${t.versionStore.latest_version})`:"",void 0,{top:!0}]])])])]),o(y)])}const Ut=W(Et,[["render",Tt],["__scopeId","data-v-5bd89357"]]);export{Gt as H,Ut as N};
