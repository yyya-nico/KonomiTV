import{u as w,j as R,a as b,R as h,_ as q}from"./top-ja3Z8cpz.js";import{_ as P}from"./logo-CgTU4R0P.js";import{V as $}from"./ssrBoot-DLDqVdMc.js";import{I as E,W as u,ai as _,M,a5 as r,F as N,a4 as n,p as i,a7 as U,a6 as D,_ as F,a8 as H,a2 as f,ay as d,ad as K,$ as s}from"./SnackbarsStore-BWrzfOQC.js";const O={key:1,class:"search-box"},T={class:"search-box__icon"},j=["placeholder"],z=E({__name:"SPHeaderBar",props:{hideOnSmartphoneVertical:{type:Boolean,default:!1}},setup(y){const k=b(),t=w(),p=u(null),o=u(!1),a=u(""),S=_(()=>{const e=t.path;return!e.startsWith("/captures")&&!e.startsWith("/settings")&&!e.startsWith("/login")&&!e.startsWith("/register")}),g=_(()=>m(t.path)?"録画番組やシリーズを検索...":"放送予定の番組を検索..."),m=e=>e.startsWith("/videos")||e.startsWith("/mylist")||e.startsWith("/watched-history"),x=()=>m(t.path)?"/videos/search":"/tv/search",C=()=>{o.value=!0,setTimeout(()=>{p.value?.focus()},0)},v=()=>{o.value=!1,a.value=""},V=()=>{if(a.value.trim()){const e=x();k.push(`${e}?query=${encodeURIComponent(a.value.trim())}`)}},W=e=>{e.key==="Enter"?V():e.key==="Escape"&&v()};return M(()=>{t.path.endsWith("/search")&&t.query.query&&(a.value=decodeURIComponent(t.query.query),o.value=!0)}),(e,c)=>{const B=f("router-link"),l=f("Icon");return s(),r("header",{class:K(["header",{"search-active":o.value,"header--hide-on-sp-vertical":y.hideOnSmartphoneVertical}])},[o.value?(s(),r("div",O,[d("div",T,[i(l,{icon:"fluent:search-20-filled",height:"20px"})]),n(d("input",{ref_key:"searchInput",ref:p,type:"search",enterkeyhint:"search",placeholder:g.value,"onUpdate:modelValue":c[0]||(c[0]=I=>a.value=I),onKeydown:W},null,40,j),[[R,a.value]]),n((s(),r("div",{class:"search-box__close",onClick:v},[i(l,{icon:"fluent:dismiss-20-filled",height:"24px"})])),[[h]])])):(s(),r(N,{key:0},[n((s(),F(B,{class:"konomitv-logo",to:"/tv/"},{default:H(()=>[...c[1]||(c[1]=[d("img",{class:"konomitv-logo__image",src:P,height:"21"},null,-1)])]),_:1})),[[h]]),i($),U(e.$slots,"timetable-controls",{},void 0,!0),S.value?n((s(),r("div",{key:0,class:"search-button",onClick:C},[i(l,{icon:"fluent:search-20-filled",height:"24px"})])),[[h]]):D("",!0)],64))],2)}}}),L=q(z,[["__scopeId","data-v-8a2cc497"]]);export{L as S};
