import{u as Z,V as w,e as D,f as ee,g as te,m as le,h as ne}from"./VTextField-DZ6j4zyt.js";import{D as ae,E as ue,aF as ie,T as oe,ak as B,G as r,cV as R,q as p,s as re,O as se,W as ce,a as n,Q as y,F as h,a2 as de,cW as fe}from"./top-BkmcGQoa.js";import{c as ve}from"./VChip-ClS500rk.js";const me=ue({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...le({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>B(e).every(c=>c!=null&&typeof c=="object")},...te({clearable:!0})},"VFileInput"),ke=ae()({name:"VFileInput",inheritAttrs:!1,props:me(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,c){let{attrs:M,emit:g,slots:a}=c;const{t:k}=ie(),l=oe(e,"modelValue",e.modelValue,t=>B(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:d,focus:N,blur:$}=Z(e),C=r(()=>typeof e.showSize!="boolean"?e.showSize:void 0),V=r(()=>(l.value??[]).reduce((t,o)=>{let{size:s=0}=o;return t+s},0)),I=r(()=>R(V.value,C.value)),f=r(()=>(l.value??[]).map(t=>{const{name:o="",size:s=0}=t;return e.showSize?`${o} (${R(s,C.value)})`:o})),x=r(()=>{const t=l.value?.length??0;return e.showSize?k(e.counterSizeString,t,I.value):k(e.counterString,t)}),b=p(),F=p(),u=p(),T=r(()=>d.value||e.active),S=r(()=>["plain","underlined"].includes(e.variant));function v(){u.value!==document.activeElement&&u.value?.focus(),d.value||N()}function j(t){u.value?.click()}function E(t){g("mousedown:control",t)}function O(t){u.value?.click(),g("click:control",t)}function W(t){t.stopPropagation(),v(),de(()=>{l.value=[],fe(e["onClick:clear"],t)})}function q(t){t.preventDefault()}function G(t){t.preventDefault(),t.dataTransfer&&(l.value=[...t.dataTransfer.files??[]])}return re(l,t=>{(!Array.isArray(t)||!t.length)&&u.value&&(u.value.value="")}),se(()=>{const t=!!(a.counter||e.counter),o=!!(t||a.details),[s,L]=ce(M),{modelValue:pe,...Q}=w.filterProps(e),U=D.filterProps(e);return n(w,y({ref:b,modelValue:e.multiple?l.value:l.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":S.value},e.class],style:e.style,"onClick:prepend":j},s,Q,{centerAffix:!S.value,focused:d.value}),{...a,default:m=>{let{id:_,isDisabled:P,isDirty:z,isReadonly:A,isValid:H}=m;return n(D,y({ref:F,"prepend-icon":e.prependIcon,onMousedown:E,onClick:O,"onClick:clear":W,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},U,{id:_.value,active:T.value||z.value,dirty:z.value||e.dirty,disabled:P.value,focused:d.value,error:H.value===!1,onDragover:q,onDrop:G}),{...a,default:J=>{let{props:{class:K,...X}}=J;return n(h,null,[n("input",y({ref:u,type:"file",readonly:A.value,disabled:P.value,multiple:e.multiple,name:e.name,onClick:i=>{i.stopPropagation(),A.value&&i.preventDefault(),v()},onChange:i=>{if(!i.target)return;const Y=i.target;l.value=[...Y.files??[]]},onFocus:v,onBlur:$},X,L),null),n("div",{class:K},[!!l.value?.length&&!e.hideInput&&(a.selection?a.selection({fileNames:f.value,totalBytes:V.value,totalBytesReadable:I.value}):e.chips?f.value.map(i=>n(ve,{key:i,size:"small",text:i},null)):f.value.join(", "))])])}})},details:o?m=>n(h,null,[a.details?.(m),t&&n(h,null,[n("span",null,null),n(ne,{active:!!l.value?.length,value:x.value,disabled:e.disabled},a.counter)])]):void 0})}),ee({},b,F,u)}});export{ke as V};
